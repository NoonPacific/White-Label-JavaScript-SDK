{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///wikifakt.min.js","webpack:///webpack/bootstrap 8446eb120c9fa250ba3b","webpack:///./src/index.js","webpack:///external \"request\"","webpack:///external \"cheerio\"","webpack:///external \"bluebird\""],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_1__","__WEBPACK_EXTERNAL_MODULE_2__","__WEBPACK_EXTERNAL_MODULE_3__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_request","_request2","_cheerio","_cheerio2","_bluebird","_bluebird2","WIKI_RANDOM","WIKI_API","factLengthLimit","getRandomFact","_this","resolve","reject","getRandomRandomArticleTitle","then","articleTitle","titleQuery","split","join","error","response","body","statusCode","json","JSON","parse","keys","query","pages","length","page","fact","extract","factSplits","$","load","text"],"mappings":"CAAA,SAAAA,EAAAC,GACA,gBAAAC,UAAA,gBAAAC,QACAA,OAAAD,QAAAD,EAAAG,QAAA,WAAAA,QAAA,WAAAA,QAAA,aACA,kBAAAC,gBAAAC,IACAD,OAAA,4CAAAJ,GACA,gBAAAC,SACAA,QAAA,SAAAD,EAAAG,QAAA,WAAAA,QAAA,WAAAA,QAAA,aAEAJ,EAAA,SAAAC,EAAAD,EAAA,QAAAA,EAAA,QAAAA,EAAA,WACCO,KAAA,SAAAC,EAAAC,EAAAC,GACD,MCAgB,UAAUC,GCN1B,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAX,OAGA,IAAAC,GAAAW,EAAAD,IACAX,WACAa,GAAAF,EACAG,QAAA,EAUA,OANAL,GAAAE,GAAAI,KAAAd,EAAAD,QAAAC,IAAAD,QAAAU,GAGAT,EAAAa,QAAA,EAGAb,EAAAD,QAvBA,GAAAY,KAqCA,OATAF,GAAAM,EAAAP,EAGAC,EAAAO,EAAAL,EAGAF,EAAAQ,EAAA,GAGAR,EAAA,KDgBM,SAAST,EAAQD,EAASU,GAE/B,YAkBA,SAASS,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GAhBvFG,OAAOC,eAAexB,EAAS,cAC3ByB,OAAO,GE3DZ,IAAAC,GAAAhB,EAAA,GFgEKiB,EAAYR,EAAuBO,GE/DxCE,EAAAlB,EAAA,GFmEKmB,EAAYV,EAAuBS,GElExCE,EAAApB,EAAA,GFsEKqB,EAAaZ,EAAuBW,GEpEnCE,EAAc,+CACdC,EAAW,yGF0EhBjC,eEvEGkC,gBAAiB,IAEjBC,cAAe,WAAW,GAAAC,GAAA/B,IACtB,OAAO,IAAA0B,cAAY,SAACM,EAASC,GACzBF,EAAKG,8BAA8BC,KAAK,SAACC,GACrC,GAAIC,GAAaD,EAAaE,MAAM,KAAKC,KAAK,QAC9C,EAAAjB,cAAQM,EAAWS,EAAY,SAACG,EAAOC,EAAUC,GAC7C,GAAKF,GAAiC,MAAxBC,EAASE,WAsBnBV,EAAOO,OAtBgC,CACvC,GAAII,GAAOC,KAAKC,MAAMJ,GAClBK,EAAO7B,OAAO6B,KAAKH,EAAKI,MAAMC,MAClC,IAAoB,IAAhBF,EAAKG,OACL,MAAOnB,GAAKD,eAEZ,IAAIqB,GAAOP,EAAKI,MAAMC,MAAMF,EAAK,IAC7BK,EAAOD,EAAKE,OAChB,KAAKD,GAAiB,KAATA,EACT,MAAOrB,GAAKD,eAEZ,IAAIsB,EAAKF,OAASnB,EAAKF,gBAAiB,CACpC,GAAIyB,GAAaF,EAAKd,MAAM,IAC5Bc,GAAOE,EAAW,IAAM,IACpBF,EAAKF,OAASnB,EAAKF,iBAAmByB,EAAWJ,OAAS,IAC1DE,GAAQE,EAAW,GAAK,KAGhCtB,EAAQoB,WAWpClB,4BAA6B,WACzB,MAAO,IAAAR,cAAY,SAACM,EAASC,IACzB,EAAAX,cAAQK,EAAa,SAACa,EAAOC,EAAUC,GACnC,GAAKF,GAAiC,MAAxBC,EAASE,WAKnBV,EAAOO,OALgC,CACvC,GAAIe,GAAI/B,aAAQgC,KAAKd,GACjBN,EAAemB,EAAE,iBAAiBE,MACtCzB,GAAQI,UFkF3BxC,EAAOD,QAAUA,EAAQ,YAIpB,SAASC,EAAQD,GGxIvBC,EAAAD,QAAAM,GH8IM,SAASL,EAAQD,GI9IvBC,EAAAD,QAAAO,GJoJM,SAASN,EAAQD,GKpJvBC,EAAAD,QAAAQ","file":"wikifakt.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"request\"), require(\"cheerio\"), require(\"bluebird\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"wikifakt\", [\"request\", \"cheerio\", \"bluebird\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"wikifakt\"] = factory(require(\"request\"), require(\"cheerio\"), require(\"bluebird\"));\n\telse\n\t\troot[\"wikifakt\"] = factory(root[\"request\"], root[\"cheerio\"], root[\"bluebird\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"request\"), require(\"cheerio\"), require(\"bluebird\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"wikifakt\", [\"request\", \"cheerio\", \"bluebird\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"wikifakt\"] = factory(require(\"request\"), require(\"cheerio\"), require(\"bluebird\"));\n\telse\n\t\troot[\"wikifakt\"] = factory(root[\"request\"], root[\"cheerio\"], root[\"bluebird\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _request = __webpack_require__(1);\n\t\n\tvar _request2 = _interopRequireDefault(_request);\n\t\n\tvar _cheerio = __webpack_require__(2);\n\t\n\tvar _cheerio2 = _interopRequireDefault(_cheerio);\n\t\n\tvar _bluebird = __webpack_require__(3);\n\t\n\tvar _bluebird2 = _interopRequireDefault(_bluebird);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar WIKI_RANDOM = 'https://en.wikipedia.org/wiki/Special:Random';\n\tvar WIKI_API = 'https://en.wikipedia.org/w/api.php?format=json&action=query&prop=extracts&exintro=&explaintext=&titles=';\n\t\n\texports.default = {\n\t    factLengthLimit: 200,\n\t\n\t    getRandomFact: function getRandomFact() {\n\t        var _this = this;\n\t\n\t        return new _bluebird2.default(function (resolve, reject) {\n\t            _this.getRandomRandomArticleTitle().then(function (articleTitle) {\n\t                var titleQuery = articleTitle.split(' ').join('%20');\n\t                (0, _request2.default)(WIKI_API + titleQuery, function (error, response, body) {\n\t                    if (!error && response.statusCode === 200) {\n\t                        var json = JSON.parse(body);\n\t                        var keys = Object.keys(json.query.pages);\n\t                        if (keys.length === 0) {\n\t                            return _this.getRandomFact();\n\t                        } else {\n\t                            var page = json.query.pages[keys[0]];\n\t                            var fact = page.extract;\n\t                            if (!fact || fact === '') {\n\t                                return _this.getRandomFact();\n\t                            } else {\n\t                                if (fact.length > _this.factLengthLimit) {\n\t                                    var factSplits = fact.split('.');\n\t                                    fact = factSplits[0] += '.';\n\t                                    if (fact.length < _this.factLengthLimit && factSplits.length > 1) {\n\t                                        fact += factSplits[1] + '.';\n\t                                    }\n\t                                }\n\t                                resolve(fact);\n\t                            }\n\t                        }\n\t                    } else {\n\t                        reject(error);\n\t                    }\n\t                });\n\t            });\n\t        });\n\t    },\n\t\n\t    getRandomRandomArticleTitle: function getRandomRandomArticleTitle() {\n\t        return new _bluebird2.default(function (resolve, reject) {\n\t            (0, _request2.default)(WIKI_RANDOM, function (error, response, body) {\n\t                if (!error && response.statusCode === 200) {\n\t                    var $ = _cheerio2.default.load(body);\n\t                    var articleTitle = $('#firstHeading').text();\n\t                    resolve(articleTitle);\n\t                } else {\n\t                    reject(error);\n\t                }\n\t            });\n\t        });\n\t    }\n\t};\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** wikifakt.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 8446eb120c9fa250ba3b\n **/","import request from 'request';\nimport cheerio from 'cheerio';\nimport Promise from 'bluebird';\n\nconst WIKI_RANDOM = 'https://en.wikipedia.org/wiki/Special:Random';\nconst WIKI_API = 'https://en.wikipedia.org/w/api.php?format=json&action=query&prop=extracts&exintro=&explaintext=&titles=';\n\nexport default {\n    factLengthLimit: 200,\n\n    getRandomFact: function() {\n        return new Promise((resolve, reject) => {\n            this.getRandomRandomArticleTitle().then((articleTitle) => {\n                let titleQuery = articleTitle.split(' ').join('%20');\n                request(WIKI_API + titleQuery, (error, response, body) => {\n                    if (!error && response.statusCode === 200) {\n                        let json = JSON.parse(body);\n                        let keys = Object.keys(json.query.pages);\n                        if (keys.length === 0) {\n                            return this.getRandomFact();\n                        } else {\n                            let page = json.query.pages[keys[0]];\n                            let fact = page.extract;\n                            if (!fact || fact === '') {\n                                return this.getRandomFact();\n                            } else {\n                                if (fact.length > this.factLengthLimit) {\n                                    let factSplits = fact.split('.');\n                                    fact = factSplits[0] += '.';\n                                    if (fact.length < this.factLengthLimit && factSplits.length > 1) {\n                                        fact += factSplits[1] + '.';\n                                    }\n                                }\n                                resolve(fact);\n                            }\n                        }\n                    } else {\n                        reject(error);\n                    }\n                });\n            });\n        });\n    },\n\n    getRandomRandomArticleTitle: function() {\n        return new Promise((resolve, reject) => {\n            request(WIKI_RANDOM, (error, response, body) => {\n                if (!error && response.statusCode === 200) {\n                    let $ = cheerio.load(body);\n                    let articleTitle = $('#firstHeading').text();\n                    resolve(articleTitle);\n                } else {\n                    reject(error);\n                }\n            });\n        });\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/index.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"request\"\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"cheerio\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"bluebird\"\n ** module id = 3\n ** module chunks = 0\n **/"],"sourceRoot":""}